#version 400
in vec4 pos;
out vec4 fragColor;
out vec4 fragColor2;
out vec4 offst;
uniform vec3 pagePosition;
uniform int id;
uniform int pageSize;
uniform int numPages;
uniform sampler2D noise;

#include shaders/include/TerrainOps.shd;

void main()
{
  vec2 ps = ((pos.xy/(2*0.8)+0.5) + pagePosition.zx) * pageSize;
  ps.y = - ps.y;

  vec3 displacement = vec3(0,1,0) * texture(heightmap, ps/60000).a;
  displacement.y += getFineValue(ps).a;

  offst = vec4(displacement,1);
}
